{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\imyua\\\\dev\\\\calendar\\\\pages\\\\icstool.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport Container from \"@material-ui/core/container\";\nimport EventCard from \"../comps/eventCard\";\nimport { Event } from \"../classes\";\nimport fs from \"fs\";\n/** Parse .ics string into event array */\n\nfunction toEventArray(lines) {\n  return new Promise(resolve => {\n    var events = [];\n    var tempEvent = {\n      cal: \"重要事項\"\n    };\n    var reading = false;\n\n    for (var line = 0; line < lines.length; line++) {\n      if (lines[line].includes(\"BEGIN\") && lines[line].includes(\"VEVENT\")) {\n        reading = true;\n      } else if (lines[line].includes(\"END\") && lines[line].includes(\"VEVENT\")) {\n        if (tempEvent.title != undefined && tempEvent.cal != undefined && tempEvent.startTime != undefined && tempEvent.endTime != undefined) {\n          events.push(new Event(tempEvent.title, tempEvent.cal, tempEvent.startTime, tempEvent.endTime));\n        }\n\n        reading = false;\n      }\n\n      if (reading) {\n        if (lines[line].includes(\"DTSTART\")) {\n          tempEvent.startTime = calenDate(lines[line].split(\":\")[1]);\n        } else if (lines[line].includes(\"DTEND\")) {\n          tempEvent.endTime = calenDate(lines[line].split(\":\")[1]);\n        } else if (lines[line].split(\":\")[0] == \"SUMMARY\") {\n          tempEvent.title = lines[line].split(\":\")[1];\n        }\n      }\n    }\n\n    resolve(events);\n  });\n}\n/** Parse string of ics date format into date object */\n\n\nfunction calenDate(icalStr) {\n  var strYear = icalStr.substr(0, 4);\n  var strMonth = parseInt(icalStr.substr(4, 2), 10) - 1;\n  var strDay = icalStr.substr(6, 2);\n  var strHour = icalStr.substr(9, 2);\n  var strMin = icalStr.substr(11, 2);\n  var strSec = icalStr.substr(13, 2);\n  var oDate = new Date(strYear, strMonth, strDay, strHour, strMin, strSec);\n  return oDate;\n}\n\nclass icstool extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onChangeHandler\", e => {\n      const file = e.target.files[0];\n      var reader = new FileReader();\n      const vm = this;\n\n      reader.onload = async function () {\n        var lines = this.result.split(\"\\n\");\n        vm.setState({\n          events: await toEventArray(lines).then(arr => {\n            fs.writeFile(\"events.json\", arr);\n          })\n        });\n      };\n\n      reader.readAsText(file);\n    });\n\n    this.state = {\n      events: []\n    };\n  }\n\n  render() {\n    const eventcards = this.state.events.map(event => {\n      return __jsx(EventCard, {\n        event: event,\n        height: 90,\n        key: event.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      });\n    });\n    return __jsx(Container, {\n      maxWidth: \"xs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      style: {\n        marginTop: this.state.events.length == 0 ? 360 : 60\n      },\n      type: \"file\",\n      name: \"file\",\n      onChange: this.onChangeHandler,\n      className: \"jsx-2817667622\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), eventcards, __jsx(_JSXStyle, {\n      id: \"2817667622\",\n      __self: this\n    }, \"body{background:#333333;}::-webkit-scrollbar{width:5px;}::-webkit-scrollbar-track{-webkit-border-radius:10px;border-radius:10px;margin:80px 0 5px 0;}::-webkit-scrollbar-thumb{-webkit-border-radius:4px;border-radius:4px;background:rgb(80,80,80);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcaW15dWFcXGRldlxcY2FsZW5kYXJcXHBhZ2VzXFxpY3N0b29sLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTBGbUMsQUFHNEMsQUFHVCxBQUdpQixBQUtELFVBUDlCLFNBSEEsT0FXc0IsQ0FMQyxpQkFNUSxFQUxQLG9CQUN4QixHQUtBIiwiZmlsZSI6IkM6XFxVc2Vyc1xcaW15dWFcXGRldlxcY2FsZW5kYXJcXHBhZ2VzXFxpY3N0b29sLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgQ29udGFpbmVyIGZyb20gXCJAbWF0ZXJpYWwtdWkvY29yZS9jb250YWluZXJcIjtcclxuaW1wb3J0IEV2ZW50Q2FyZCBmcm9tIFwiLi4vY29tcHMvZXZlbnRDYXJkXCI7XHJcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSBcIi4uL2NsYXNzZXNcIjtcclxuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xyXG5cclxuLyoqIFBhcnNlIC5pY3Mgc3RyaW5nIGludG8gZXZlbnQgYXJyYXkgKi9cclxuZnVuY3Rpb24gdG9FdmVudEFycmF5KGxpbmVzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgdmFyIGV2ZW50cyA9IFtdO1xyXG4gICAgICAgIHZhciB0ZW1wRXZlbnQgPSB7IGNhbDogXCLph43opoHkuovpoIVcIiB9O1xyXG4gICAgICAgIHZhciByZWFkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgZm9yICh2YXIgbGluZSA9IDA7IGxpbmUgPCBsaW5lcy5sZW5ndGg7IGxpbmUrKykge1xyXG4gICAgICAgICAgICBpZiAobGluZXNbbGluZV0uaW5jbHVkZXMoXCJCRUdJTlwiKSAmJiBsaW5lc1tsaW5lXS5pbmNsdWRlcyhcIlZFVkVOVFwiKSkge1xyXG4gICAgICAgICAgICAgICAgcmVhZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZXNbbGluZV0uaW5jbHVkZXMoXCJFTkRcIikgJiYgbGluZXNbbGluZV0uaW5jbHVkZXMoXCJWRVZFTlRcIikpIHtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wRXZlbnQudGl0bGUgIT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcEV2ZW50LmNhbCAhPSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wRXZlbnQuc3RhcnRUaW1lICE9IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBFdmVudC5lbmRUaW1lICE9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzLnB1c2gobmV3IEV2ZW50KHRlbXBFdmVudC50aXRsZSwgdGVtcEV2ZW50LmNhbCwgdGVtcEV2ZW50LnN0YXJ0VGltZSwgdGVtcEV2ZW50LmVuZFRpbWUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmVhZGluZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmVzW2xpbmVdLmluY2x1ZGVzKFwiRFRTVEFSVFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBFdmVudC5zdGFydFRpbWUgPSBjYWxlbkRhdGUobGluZXNbbGluZV0uc3BsaXQoXCI6XCIpWzFdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZXNbbGluZV0uaW5jbHVkZXMoXCJEVEVORFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBFdmVudC5lbmRUaW1lID0gY2FsZW5EYXRlKGxpbmVzW2xpbmVdLnNwbGl0KFwiOlwiKVsxXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVzW2xpbmVdLnNwbGl0KFwiOlwiKVswXSA9PSBcIlNVTU1BUllcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBFdmVudC50aXRsZSA9IGxpbmVzW2xpbmVdLnNwbGl0KFwiOlwiKVsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXNvbHZlKGV2ZW50cyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqIFBhcnNlIHN0cmluZyBvZiBpY3MgZGF0ZSBmb3JtYXQgaW50byBkYXRlIG9iamVjdCAqL1xyXG5mdW5jdGlvbiBjYWxlbkRhdGUoaWNhbFN0cikge1xyXG4gICAgdmFyIHN0clllYXIgPSBpY2FsU3RyLnN1YnN0cigwLCA0KTtcclxuICAgIHZhciBzdHJNb250aCA9IHBhcnNlSW50KGljYWxTdHIuc3Vic3RyKDQsIDIpLCAxMCkgLSAxO1xyXG4gICAgdmFyIHN0ckRheSA9IGljYWxTdHIuc3Vic3RyKDYsIDIpO1xyXG4gICAgdmFyIHN0ckhvdXIgPSBpY2FsU3RyLnN1YnN0cig5LCAyKTtcclxuICAgIHZhciBzdHJNaW4gPSBpY2FsU3RyLnN1YnN0cigxMSwgMik7XHJcbiAgICB2YXIgc3RyU2VjID0gaWNhbFN0ci5zdWJzdHIoMTMsIDIpO1xyXG5cclxuICAgIHZhciBvRGF0ZSA9IG5ldyBEYXRlKHN0clllYXIsIHN0ck1vbnRoLCBzdHJEYXksIHN0ckhvdXIsIHN0ck1pbiwgc3RyU2VjKTtcclxuXHJcbiAgICByZXR1cm4gb0RhdGU7XHJcbn1cclxuXHJcbmNsYXNzIGljc3Rvb2wgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgZXZlbnRzOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VIYW5kbGVyID0gZSA9PiB7XHJcbiAgICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdO1xyXG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICByZWFkZXIub25sb2FkID0gYXN5bmMgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5lcyA9IHRoaXMucmVzdWx0LnNwbGl0KFwiXFxuXCIpO1xyXG4gICAgICAgICAgICB2bS5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBldmVudHM6IGF3YWl0IHRvRXZlbnRBcnJheShsaW5lcykudGhlbihhcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZzLndyaXRlRmlsZShcImV2ZW50cy5qc29uXCIsIGFycik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnRjYXJkcyA9IHRoaXMuc3RhdGUuZXZlbnRzLm1hcChldmVudCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiA8RXZlbnRDYXJkIGV2ZW50PXtldmVudH0gaGVpZ2h0PXs5MH0ga2V5PXtldmVudC50aXRsZX0gLz47XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPENvbnRhaW5lciBtYXhXaWR0aD1cInhzXCI+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Ub3A6IHRoaXMuc3RhdGUuZXZlbnRzLmxlbmd0aCA9PSAwID8gMzYwIDogNjAgfX1cclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZmlsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImZpbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlSGFuZGxlcn1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICB7ZXZlbnRjYXJkc31cclxuICAgICAgICAgICAgICAgIDxzdHlsZSBnbG9iYWwganN4PntgXHJcbiAgICAgICAgICAgICAgICAgICAgYm9keSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMzMzMzMzM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXIge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDgwcHggMCA1cHggMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYig4MCwgODAsIDgwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgICAgICAgIDwvQ29udGFpbmVyPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGljc3Rvb2w7XHJcbiJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\imyua\\\\\\\\dev\\\\\\\\calendar\\\\\\\\pages\\\\\\\\icstool.js */\"));\n  }\n\n}\n\nexport default icstool;","map":{"version":3,"sources":["C:/Users/imyua/dev/calendar/pages/icstool.js"],"names":["React","Container","EventCard","Event","fs","toEventArray","lines","Promise","resolve","events","tempEvent","cal","reading","line","length","includes","title","undefined","startTime","endTime","push","calenDate","split","icalStr","strYear","substr","strMonth","parseInt","strDay","strHour","strMin","strSec","oDate","Date","icstool","Component","constructor","props","e","file","target","files","reader","FileReader","vm","onload","result","setState","then","arr","writeFile","readAsText","state","render","eventcards","map","event","marginTop","onChangeHandler"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Container from \"@material-ui/core/container\";\r\nimport EventCard from \"../comps/eventCard\";\r\nimport { Event } from \"../classes\";\r\nimport fs from \"fs\";\r\n\r\n/** Parse .ics string into event array */\r\nfunction toEventArray(lines) {\r\n    return new Promise(resolve => {\r\n        var events = [];\r\n        var tempEvent = { cal: \"重要事項\" };\r\n        var reading = false;\r\n        for (var line = 0; line < lines.length; line++) {\r\n            if (lines[line].includes(\"BEGIN\") && lines[line].includes(\"VEVENT\")) {\r\n                reading = true;\r\n            } else if (lines[line].includes(\"END\") && lines[line].includes(\"VEVENT\")) {\r\n                if (\r\n                    tempEvent.title != undefined &&\r\n                    tempEvent.cal != undefined &&\r\n                    tempEvent.startTime != undefined &&\r\n                    tempEvent.endTime != undefined\r\n                ) {\r\n                    events.push(new Event(tempEvent.title, tempEvent.cal, tempEvent.startTime, tempEvent.endTime));\r\n                }\r\n                reading = false;\r\n            }\r\n            if (reading) {\r\n                if (lines[line].includes(\"DTSTART\")) {\r\n                    tempEvent.startTime = calenDate(lines[line].split(\":\")[1]);\r\n                } else if (lines[line].includes(\"DTEND\")) {\r\n                    tempEvent.endTime = calenDate(lines[line].split(\":\")[1]);\r\n                } else if (lines[line].split(\":\")[0] == \"SUMMARY\") {\r\n                    tempEvent.title = lines[line].split(\":\")[1];\r\n                }\r\n            }\r\n        }\r\n        resolve(events);\r\n    });\r\n}\r\n\r\n/** Parse string of ics date format into date object */\r\nfunction calenDate(icalStr) {\r\n    var strYear = icalStr.substr(0, 4);\r\n    var strMonth = parseInt(icalStr.substr(4, 2), 10) - 1;\r\n    var strDay = icalStr.substr(6, 2);\r\n    var strHour = icalStr.substr(9, 2);\r\n    var strMin = icalStr.substr(11, 2);\r\n    var strSec = icalStr.substr(13, 2);\r\n\r\n    var oDate = new Date(strYear, strMonth, strDay, strHour, strMin, strSec);\r\n\r\n    return oDate;\r\n}\r\n\r\nclass icstool extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            events: []\r\n        };\r\n    }\r\n\r\n    onChangeHandler = e => {\r\n        const file = e.target.files[0];\r\n        var reader = new FileReader();\r\n        const vm = this;\r\n        reader.onload = async function() {\r\n            var lines = this.result.split(\"\\n\");\r\n            vm.setState({\r\n                events: await toEventArray(lines).then(arr => {\r\n                    fs.writeFile(\"events.json\", arr);\r\n                })\r\n            });\r\n        };\r\n        reader.readAsText(file);\r\n    };\r\n\r\n    render() {\r\n        const eventcards = this.state.events.map(event => {\r\n            return <EventCard event={event} height={90} key={event.title} />;\r\n        });\r\n        return (\r\n            <Container maxWidth=\"xs\">\r\n                <input\r\n                    style={{ marginTop: this.state.events.length == 0 ? 360 : 60 }}\r\n                    type=\"file\"\r\n                    name=\"file\"\r\n                    onChange={this.onChangeHandler}\r\n                />\r\n                {eventcards}\r\n                <style global jsx>{`\r\n                    body {\r\n                        background: #333333;\r\n                    }\r\n                    ::-webkit-scrollbar {\r\n                        width: 5px;\r\n                    }\r\n                    ::-webkit-scrollbar-track {\r\n                        -webkit-border-radius: 10px;\r\n                        border-radius: 10px;\r\n                        margin: 80px 0 5px 0;\r\n                    }\r\n                    ::-webkit-scrollbar-thumb {\r\n                        -webkit-border-radius: 4px;\r\n                        border-radius: 4px;\r\n                        background: rgb(80, 80, 80);\r\n                    }\r\n                `}</style>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default icstool;\r\n"]},"metadata":{},"sourceType":"module"}