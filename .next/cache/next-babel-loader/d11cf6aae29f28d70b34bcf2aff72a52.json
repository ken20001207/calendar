{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\imyua\\\\dev\\\\calendar\\\\pages\\\\index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Container from \"@material-ui/core/container\";\nimport DayView from \"../comps/DayView\";\nimport fetch from \"isomorphic-unfetch\";\nimport Grid from \"@material-ui/core/Grid\";\nimport MomentUtils from \"@material-ui-pickers/adapter/moment\";\nimport { User, Calendar, Event } from \"../classes\";\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\n\nfunction startOfDay(date) {\n  if (!date instanceof Date) {\n    console.error(\"傳入的時間不是合法的 Date 物件。\");\n    return null;\n  }\n\n  date = new Date(date);\n  var time = new Date();\n  time.setTime(date.getTime());\n  time.setHours(0, 0, 0);\n  return time;\n}\n\nfunction endOfDay(date) {\n  if (!date instanceof Date) {\n    console.error(\"傳入的時間不是合法的 Date 物件。\");\n    return null;\n  }\n\n  date = new Date(date);\n  var time = new Date();\n  time.setTime(date.getTime());\n  time.setHours(23, 59, 59);\n  return time;\n}\n\nfunction fillEvents(events) {\n  var filled = new Array();\n  var time = startOfDay(events[0].startTime);\n  events.map(function (event) {\n    var startTime = new Date(event.startTime);\n    var endTime = new Date(event.endTime);\n    filled.push(new Event({\n      startTime: time,\n      endTime: startTime\n    }, true));\n    filled.push(event);\n    time.setTime(endTime.getTime());\n  });\n  filled.push(new Event({\n    startTime: time,\n    endTime: endOfDay(events[0].startTime)\n  }, true));\n  return filled;\n}\n\nvar index =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(index, _React$Component);\n\n  function index() {\n    _classCallCheck(this, index);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(index).apply(this, arguments));\n  }\n\n  _createClass(index, [{\n    key: \"render\",\n    value: function render() {\n      var timeline = {\n        overflowY: \"scroll\",\n        maxHeight: \"90vh\",\n        padding: 24\n      };\n      return __jsx(MuiPickersUtilsProvider, {\n        utils: MuiPickersUtilsProvider,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, __jsx(Container, {\n        maxWidth: \"md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, __jsx(Grid, {\n        container: true,\n        spacing: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, __jsx(Grid, {\n        item: true,\n        xs: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        style: {\n          marginTop: 120\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, __jsx(StaticDatePicker, {\n        autoOk: true,\n        orientation: \"landscape\",\n        openTo: \"date\",\n        value: date,\n        onChange: function onChange(date) {\n          return handleDateChange(date);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }))), __jsx(Grid, {\n        item: true,\n        xs: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        style: timeline,\n        className: \"jsx-1913479550\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, __jsx(DayView, {\n        events: this.props.filled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })), __jsx(_JSXStyle, {\n        id: \"1913479550\",\n        __self: this\n      }, \"body{background:#333333;}::-webkit-scrollbar{width:5px;}::-webkit-scrollbar-track{-webkit-border-radius:10px;border-radius:10px;margin:80px 0 5px 0;}::-webkit-scrollbar-thumb{-webkit-border-radius:4px;border-radius:4px;background:rgb(80,80,80);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcaW15dWFcXGRldlxcY2FsZW5kYXJcXHBhZ2VzXFxpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE2RStDLEFBR3dELEFBR1QsQUFHaUIsQUFLRCxVQVA5QixTQUhBLE9BV3NCLENBTEMsaUJBTVEsRUFMUCxvQkFDeEIsR0FLQSIsImZpbGUiOiJDOlxcVXNlcnNcXGlteXVhXFxkZXZcXGNhbGVuZGFyXFxwYWdlc1xcaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBDb250YWluZXIgZnJvbSBcIkBtYXRlcmlhbC11aS9jb3JlL2NvbnRhaW5lclwiO1xyXG5pbXBvcnQgRGF5VmlldyBmcm9tIFwiLi4vY29tcHMvRGF5Vmlld1wiO1xyXG5pbXBvcnQgZmV0Y2ggZnJvbSBcImlzb21vcnBoaWMtdW5mZXRjaFwiO1xyXG5pbXBvcnQgR3JpZCBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmUvR3JpZFwiO1xyXG5pbXBvcnQgTW9tZW50VXRpbHMgZnJvbSBcIkBtYXRlcmlhbC11aS1waWNrZXJzL2FkYXB0ZXIvbW9tZW50XCI7XHJcbmltcG9ydCB7IFVzZXIsIENhbGVuZGFyLCBFdmVudCB9IGZyb20gXCIuLi9jbGFzc2VzXCI7XHJcbmltcG9ydCB7IE11aVBpY2tlcnNVdGlsc1Byb3ZpZGVyIH0gZnJvbSBcIkBtYXRlcmlhbC11aS9waWNrZXJzXCI7XHJcblxyXG5mdW5jdGlvbiBzdGFydE9mRGF5KGRhdGUpIHtcclxuICAgIGlmICghZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwi5YKz5YWl55qE5pmC6ZaT5LiN5piv5ZCI5rOV55qEIERhdGUg54mp5Lu244CCXCIpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgdmFyIHRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdGltZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpKTtcclxuICAgIHRpbWUuc2V0SG91cnMoMCwgMCwgMCk7XHJcbiAgICByZXR1cm4gdGltZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5kT2ZEYXkoZGF0ZSkge1xyXG4gICAgaWYgKCFkYXRlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLlgrPlhaXnmoTmmYLplpPkuI3mmK/lkIjms5XnmoQgRGF0ZSDnianku7bjgIJcIik7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBkYXRlID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICB2YXIgdGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgICB0aW1lLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgdGltZS5zZXRIb3VycygyMywgNTksIDU5KTtcclxuICAgIHJldHVybiB0aW1lO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaWxsRXZlbnRzKGV2ZW50cykge1xyXG4gICAgdmFyIGZpbGxlZCA9IG5ldyBBcnJheSgpO1xyXG4gICAgdmFyIHRpbWUgPSBzdGFydE9mRGF5KGV2ZW50c1swXS5zdGFydFRpbWUpO1xyXG4gICAgZXZlbnRzLm1hcChldmVudCA9PiB7XHJcbiAgICAgICAgdmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKGV2ZW50LnN0YXJ0VGltZSk7XHJcbiAgICAgICAgdmFyIGVuZFRpbWUgPSBuZXcgRGF0ZShldmVudC5lbmRUaW1lKTtcclxuICAgICAgICBmaWxsZWQucHVzaChuZXcgRXZlbnQoeyBzdGFydFRpbWU6IHRpbWUsIGVuZFRpbWU6IHN0YXJ0VGltZSB9LCB0cnVlKSk7XHJcbiAgICAgICAgZmlsbGVkLnB1c2goZXZlbnQpO1xyXG4gICAgICAgIHRpbWUuc2V0VGltZShlbmRUaW1lLmdldFRpbWUoKSk7XHJcbiAgICB9KTtcclxuICAgIGZpbGxlZC5wdXNoKG5ldyBFdmVudCh7IHN0YXJ0VGltZTogdGltZSwgZW5kVGltZTogZW5kT2ZEYXkoZXZlbnRzWzBdLnN0YXJ0VGltZSkgfSwgdHJ1ZSkpO1xyXG4gICAgcmV0dXJuIGZpbGxlZDtcclxufVxyXG5cclxuY2xhc3MgaW5kZXggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgc3RhdGljIGFzeW5jIGdldEluaXRpYWxQcm9wcygpIHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvZ2V0dXNlcmRhdGFcIik7XHJcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICAgICAgdmFyIHVzZXJkYXRhID0gbmV3IFVzZXIoanNvbik7XHJcbiAgICAgICAgdmFyIGZpbGxlZCA9IGZpbGxFdmVudHModXNlcmRhdGEuY2FsZW5kYXJzWzBdLmV2ZW50cyk7XHJcbiAgICAgICAgcmV0dXJuIHsgdXNlcmRhdGE6IHVzZXJkYXRhLCBmaWxsZWQ6IGZpbGxlZCB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCB0aW1lbGluZSA9IHtcclxuICAgICAgICAgICAgb3ZlcmZsb3dZOiBcInNjcm9sbFwiLFxyXG4gICAgICAgICAgICBtYXhIZWlnaHQ6IFwiOTB2aFwiLFxyXG4gICAgICAgICAgICBwYWRkaW5nOiAyNFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxNdWlQaWNrZXJzVXRpbHNQcm92aWRlciB1dGlscz17TXVpUGlja2Vyc1V0aWxzUHJvdmlkZXJ9PlxyXG4gICAgICAgICAgICAgICAgPENvbnRhaW5lciBtYXhXaWR0aD1cIm1kXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPEdyaWQgY29udGFpbmVyIHNwYWNpbmc9ezJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8R3JpZCBpdGVtIHhzPXs0fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxMjAgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN0YXRpY0RhdGVQaWNrZXIgYXV0b09rIG9yaWVudGF0aW9uPVwibGFuZHNjYXBlXCIgb3BlblRvPVwiZGF0ZVwiIHZhbHVlPXtkYXRlfSBvbkNoYW5nZT17ZGF0ZSA9PiBoYW5kbGVEYXRlQ2hhbmdlKGRhdGUpfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvR3JpZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEdyaWQgaXRlbSB4cz17OH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt0aW1lbGluZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERheVZpZXcgZXZlbnRzPXt0aGlzLnByb3BzLmZpbGxlZH0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZSBnbG9iYWwganN4PntgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMzMzMzMzM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXIge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDgwcHggMCA1cHggMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYig4MCwgODAsIDgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvR3JpZD5cclxuICAgICAgICAgICAgICAgICAgICA8L0dyaWQ+XHJcbiAgICAgICAgICAgICAgICA8L0NvbnRhaW5lcj5cclxuICAgICAgICAgICAgPC9NdWlQaWNrZXJzVXRpbHNQcm92aWRlcj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBpbmRleDtcclxuIl19 */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\imyua\\\\\\\\dev\\\\\\\\calendar\\\\\\\\pages\\\\\\\\index.js */\")))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps() {\n      var res, json, userdata, filled;\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(fetch(\"http://localhost:3000/api/getuserdata\"));\n\n            case 2:\n              res = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(res.json());\n\n            case 5:\n              json = _context.sent;\n              userdata = new User(json);\n              filled = fillEvents(userdata.calendars[0].events);\n              return _context.abrupt(\"return\", {\n                userdata: userdata,\n                filled: filled\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }]);\n\n  return index;\n}(React.Component);\n\nexport default index;","map":{"version":3,"sources":["C:/Users/imyua/dev/calendar/pages/index.js"],"names":["React","Container","DayView","fetch","Grid","MomentUtils","User","Calendar","Event","MuiPickersUtilsProvider","startOfDay","date","Date","console","error","time","setTime","getTime","setHours","endOfDay","fillEvents","events","filled","Array","startTime","map","event","endTime","push","index","timeline","overflowY","maxHeight","padding","marginTop","handleDateChange","props","res","json","userdata","calendars","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Container from \"@material-ui/core/container\";\r\nimport DayView from \"../comps/DayView\";\r\nimport fetch from \"isomorphic-unfetch\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport MomentUtils from \"@material-ui-pickers/adapter/moment\";\r\nimport { User, Calendar, Event } from \"../classes\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\n\r\nfunction startOfDay(date) {\r\n    if (!date instanceof Date) {\r\n        console.error(\"傳入的時間不是合法的 Date 物件。\");\r\n        return null;\r\n    }\r\n    date = new Date(date);\r\n    var time = new Date();\r\n    time.setTime(date.getTime());\r\n    time.setHours(0, 0, 0);\r\n    return time;\r\n}\r\n\r\nfunction endOfDay(date) {\r\n    if (!date instanceof Date) {\r\n        console.error(\"傳入的時間不是合法的 Date 物件。\");\r\n        return null;\r\n    }\r\n    date = new Date(date);\r\n    var time = new Date();\r\n    time.setTime(date.getTime());\r\n    time.setHours(23, 59, 59);\r\n    return time;\r\n}\r\n\r\nfunction fillEvents(events) {\r\n    var filled = new Array();\r\n    var time = startOfDay(events[0].startTime);\r\n    events.map(event => {\r\n        var startTime = new Date(event.startTime);\r\n        var endTime = new Date(event.endTime);\r\n        filled.push(new Event({ startTime: time, endTime: startTime }, true));\r\n        filled.push(event);\r\n        time.setTime(endTime.getTime());\r\n    });\r\n    filled.push(new Event({ startTime: time, endTime: endOfDay(events[0].startTime) }, true));\r\n    return filled;\r\n}\r\n\r\nclass index extends React.Component {\r\n    static async getInitialProps() {\r\n        const res = await fetch(\"http://localhost:3000/api/getuserdata\");\r\n        const json = await res.json();\r\n        var userdata = new User(json);\r\n        var filled = fillEvents(userdata.calendars[0].events);\r\n        return { userdata: userdata, filled: filled };\r\n    }\r\n\r\n    render() {\r\n        const timeline = {\r\n            overflowY: \"scroll\",\r\n            maxHeight: \"90vh\",\r\n            padding: 24\r\n        };\r\n\r\n        return (\r\n            <MuiPickersUtilsProvider utils={MuiPickersUtilsProvider}>\r\n                <Container maxWidth=\"md\">\r\n                    <Grid container spacing={2}>\r\n                        <Grid item xs={4}>\r\n                            <div style={{ marginTop: 120 }}>\r\n                                <StaticDatePicker autoOk orientation=\"landscape\" openTo=\"date\" value={date} onChange={date => handleDateChange(date)} />\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item xs={8}>\r\n                            <div style={timeline}>\r\n                                <DayView events={this.props.filled} />\r\n                            </div>\r\n\r\n                            <style global jsx>{`\r\n                                body {\r\n                                    background: #333333;\r\n                                }\r\n                                ::-webkit-scrollbar {\r\n                                    width: 5px;\r\n                                }\r\n                                ::-webkit-scrollbar-track {\r\n                                    -webkit-border-radius: 10px;\r\n                                    border-radius: 10px;\r\n                                    margin: 80px 0 5px 0;\r\n                                }\r\n                                ::-webkit-scrollbar-thumb {\r\n                                    -webkit-border-radius: 4px;\r\n                                    border-radius: 4px;\r\n                                    background: rgb(80, 80, 80);\r\n                                }\r\n                            `}</style>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Container>\r\n            </MuiPickersUtilsProvider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default index;\r\n"]},"metadata":{},"sourceType":"module"}