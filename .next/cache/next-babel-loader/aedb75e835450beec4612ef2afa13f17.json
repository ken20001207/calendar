{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nvar _jsxFileName = \"C:\\\\Users\\\\imyua\\\\dev\\\\calendar\\\\pages\\\\icstool.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Container from \"@material-ui/core/container\";\nimport EventCard from \"../comps/eventCard\";\nimport { Event } from \"../classes\";\n/** Parse .ics string into event array */\n\nfunction toEventArray(lines) {\n  return new _Promise(function (resolve) {\n    var events = [];\n    var tempEvent = {\n      cal: \"重要事項\"\n    };\n    var reading = false;\n\n    for (var line = 0; line < lines.length; line++) {\n      if (lines[line].includes(\"BEGIN\") && lines[line].includes(\"VEVENT\")) {\n        reading = true;\n      } else if (lines[line].includes(\"END\") && lines[line].includes(\"VEVENT\")) {\n        if (tempEvent.title != undefined && tempEvent.cal != undefined && tempEvent.startTime != undefined && tempEvent.endTime != undefined) {\n          events.push(new Event(tempEvent.title, tempEvent.cal, tempEvent.startTime, tempEvent.endTime));\n        }\n\n        reading = false;\n      }\n\n      if (reading) {\n        if (lines[line].includes(\"DTSTART\")) {\n          tempEvent.startTime = calenDate(lines[line].split(\":\")[1]);\n        } else if (lines[line].includes(\"DTEND\")) {\n          tempEvent.endTime = calenDate(lines[line].split(\":\")[1]);\n        } else if (lines[line].split(\":\")[0] == \"SUMMARY\") {\n          tempEvent.title = lines[line].split(\":\")[1];\n        }\n      }\n    }\n\n    resolve(events);\n  });\n}\n/** Parse string of ics date format into date object */\n\n\nfunction calenDate(icalStr) {\n  var strYear = icalStr.substr(0, 4);\n  var strMonth = _parseInt(icalStr.substr(4, 2), 10) - 1;\n  var strDay = icalStr.substr(6, 2);\n  var strHour = icalStr.substr(9, 2);\n  var strMin = icalStr.substr(11, 2);\n  var strSec = icalStr.substr(13, 2);\n  var oDate = new Date(strYear, strMonth, strDay, strHour, strMin, strSec);\n  return oDate;\n}\n\nvar icstool =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(icstool, _React$Component);\n\n  function icstool(props) {\n    var _this;\n\n    _classCallCheck(this, icstool);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(icstool).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeHandler\", function (e) {\n      var file = e.target.files[0];\n      var reader = new FileReader();\n\n      var vm = _assertThisInitialized(_this);\n\n      reader.onload = function _callee() {\n        var lines;\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                lines = this.result.split(\"\\n\");\n                _context.t0 = vm;\n                _context.next = 4;\n                return _regeneratorRuntime.awrap(toEventArray(lines).then(function (arr) {\n                  var a = \"\";\n                  arr.map(function (event) {\n                    a = a + \"new Event(\" + event.title + \",\" + event.cal + \", new Date(\" + event.startTime + \"), new Date(\" + event.endTime + \"),\";\n                  });\n                  console.log(a);\n                }));\n\n              case 4:\n                _context.t1 = _context.sent;\n                _context.t2 = {\n                  events: _context.t1\n                };\n\n                _context.t0.setState.call(_context.t0, _context.t2);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, this);\n      };\n\n      reader.readAsText(file);\n    });\n\n    _this.state = {\n      events: []\n    };\n    return _this;\n  }\n\n  _createClass(icstool, [{\n    key: \"render\",\n    value: function render() {\n      var eventcards = this.state.events.map(function (event) {\n        return __jsx(EventCard, {\n          event: event,\n          height: 90,\n          key: event.title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        });\n      });\n      return __jsx(Container, {\n        maxWidth: \"xs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, __jsx(\"input\", {\n        style: {\n          marginTop: this.state.events.length == 0 ? 360 : 60\n        },\n        type: \"file\",\n        name: \"file\",\n        onChange: this.onChangeHandler,\n        className: \"jsx-2817667622\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }), eventcards, __jsx(_JSXStyle, {\n        id: \"2817667622\",\n        __self: this\n      }, \"body{background:#333333;}::-webkit-scrollbar{width:5px;}::-webkit-scrollbar-track{-webkit-border-radius:10px;border-radius:10px;margin:80px 0 5px 0;}::-webkit-scrollbar-thumb{-webkit-border-radius:4px;border-radius:4px;background:rgb(80,80,80);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcaW15dWFcXGRldlxcY2FsZW5kYXJcXHBhZ2VzXFxpY3N0b29sLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXVHbUMsQUFHNEMsQUFHVCxBQUdpQixBQUtELFVBUDlCLFNBSEEsT0FXc0IsQ0FMQyxpQkFNUSxFQUxQLG9CQUN4QixHQUtBIiwiZmlsZSI6IkM6XFxVc2Vyc1xcaW15dWFcXGRldlxcY2FsZW5kYXJcXHBhZ2VzXFxpY3N0b29sLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgQ29udGFpbmVyIGZyb20gXCJAbWF0ZXJpYWwtdWkvY29yZS9jb250YWluZXJcIjtcclxuaW1wb3J0IEV2ZW50Q2FyZCBmcm9tIFwiLi4vY29tcHMvZXZlbnRDYXJkXCI7XHJcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSBcIi4uL2NsYXNzZXNcIjtcclxuXHJcbi8qKiBQYXJzZSAuaWNzIHN0cmluZyBpbnRvIGV2ZW50IGFycmF5ICovXHJcbmZ1bmN0aW9uIHRvRXZlbnRBcnJheShsaW5lcykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIHZhciBldmVudHMgPSBbXTtcclxuICAgICAgICB2YXIgdGVtcEV2ZW50ID0geyBjYWw6IFwi6YeN6KaB5LqL6aCFXCIgfTtcclxuICAgICAgICB2YXIgcmVhZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAodmFyIGxpbmUgPSAwOyBsaW5lIDwgbGluZXMubGVuZ3RoOyBsaW5lKyspIHtcclxuICAgICAgICAgICAgaWYgKGxpbmVzW2xpbmVdLmluY2x1ZGVzKFwiQkVHSU5cIikgJiYgbGluZXNbbGluZV0uaW5jbHVkZXMoXCJWRVZFTlRcIikpIHtcclxuICAgICAgICAgICAgICAgIHJlYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVzW2xpbmVdLmluY2x1ZGVzKFwiRU5EXCIpICYmIGxpbmVzW2xpbmVdLmluY2x1ZGVzKFwiVkVWRU5UXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcEV2ZW50LnRpdGxlICE9IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBFdmVudC5jYWwgIT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcEV2ZW50LnN0YXJ0VGltZSAhPSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wRXZlbnQuZW5kVGltZSAhPSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50cy5wdXNoKG5ldyBFdmVudCh0ZW1wRXZlbnQudGl0bGUsIHRlbXBFdmVudC5jYWwsIHRlbXBFdmVudC5zdGFydFRpbWUsIHRlbXBFdmVudC5lbmRUaW1lKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZWFkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJlYWRpbmcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChsaW5lc1tsaW5lXS5pbmNsdWRlcyhcIkRUU1RBUlRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wRXZlbnQuc3RhcnRUaW1lID0gY2FsZW5EYXRlKGxpbmVzW2xpbmVdLnNwbGl0KFwiOlwiKVsxXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVzW2xpbmVdLmluY2x1ZGVzKFwiRFRFTkRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wRXZlbnQuZW5kVGltZSA9IGNhbGVuRGF0ZShsaW5lc1tsaW5lXS5zcGxpdChcIjpcIilbMV0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lc1tsaW5lXS5zcGxpdChcIjpcIilbMF0gPT0gXCJTVU1NQVJZXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wRXZlbnQudGl0bGUgPSBsaW5lc1tsaW5lXS5zcGxpdChcIjpcIilbMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzb2x2ZShldmVudHMpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKiBQYXJzZSBzdHJpbmcgb2YgaWNzIGRhdGUgZm9ybWF0IGludG8gZGF0ZSBvYmplY3QgKi9cclxuZnVuY3Rpb24gY2FsZW5EYXRlKGljYWxTdHIpIHtcclxuICAgIHZhciBzdHJZZWFyID0gaWNhbFN0ci5zdWJzdHIoMCwgNCk7XHJcbiAgICB2YXIgc3RyTW9udGggPSBwYXJzZUludChpY2FsU3RyLnN1YnN0cig0LCAyKSwgMTApIC0gMTtcclxuICAgIHZhciBzdHJEYXkgPSBpY2FsU3RyLnN1YnN0cig2LCAyKTtcclxuICAgIHZhciBzdHJIb3VyID0gaWNhbFN0ci5zdWJzdHIoOSwgMik7XHJcbiAgICB2YXIgc3RyTWluID0gaWNhbFN0ci5zdWJzdHIoMTEsIDIpO1xyXG4gICAgdmFyIHN0clNlYyA9IGljYWxTdHIuc3Vic3RyKDEzLCAyKTtcclxuXHJcbiAgICB2YXIgb0RhdGUgPSBuZXcgRGF0ZShzdHJZZWFyLCBzdHJNb250aCwgc3RyRGF5LCBzdHJIb3VyLCBzdHJNaW4sIHN0clNlYyk7XHJcblxyXG4gICAgcmV0dXJuIG9EYXRlO1xyXG59XHJcblxyXG5jbGFzcyBpY3N0b29sIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGV2ZW50czogW11cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlSGFuZGxlciA9IGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTtcclxuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGFzeW5jIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgbGluZXMgPSB0aGlzLnJlc3VsdC5zcGxpdChcIlxcblwiKTtcclxuICAgICAgICAgICAgdm0uc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgZXZlbnRzOiBhd2FpdCB0b0V2ZW50QXJyYXkobGluZXMpLnRoZW4oYXJyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyLm1hcChldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGEgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5ldyBFdmVudChcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC50aXRsZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIixcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5jYWwgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIsIG5ldyBEYXRlKFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0YXJ0VGltZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiksIG5ldyBEYXRlKFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmVuZFRpbWUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIpLFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGEpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50Y2FyZHMgPSB0aGlzLnN0YXRlLmV2ZW50cy5tYXAoZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gPEV2ZW50Q2FyZCBldmVudD17ZXZlbnR9IGhlaWdodD17OTB9IGtleT17ZXZlbnQudGl0bGV9IC8+O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxDb250YWluZXIgbWF4V2lkdGg9XCJ4c1wiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luVG9wOiB0aGlzLnN0YXRlLmV2ZW50cy5sZW5ndGggPT0gMCA/IDM2MCA6IDYwIH19XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJmaWxlXCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZUhhbmRsZXJ9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAge2V2ZW50Y2FyZHN9XHJcbiAgICAgICAgICAgICAgICA8c3R5bGUgZ2xvYmFsIGpzeD57YFxyXG4gICAgICAgICAgICAgICAgICAgIGJvZHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMzMzMzMzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDVweDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMTBweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiA4MHB4IDAgNXB4IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2IoODAsIDgwLCA4MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYH08L3N0eWxlPlxyXG4gICAgICAgICAgICA8L0NvbnRhaW5lcj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBpY3N0b29sO1xyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\imyua\\\\\\\\dev\\\\\\\\calendar\\\\\\\\pages\\\\\\\\icstool.js */\"));\n    }\n  }]);\n\n  return icstool;\n}(React.Component);\n\nexport default icstool;","map":{"version":3,"sources":["C:/Users/imyua/dev/calendar/pages/icstool.js"],"names":["React","Container","EventCard","Event","toEventArray","lines","resolve","events","tempEvent","cal","reading","line","length","includes","title","undefined","startTime","endTime","push","calenDate","split","icalStr","strYear","substr","strMonth","strDay","strHour","strMin","strSec","oDate","Date","icstool","props","e","file","target","files","reader","FileReader","vm","onload","result","then","arr","a","map","event","console","log","setState","readAsText","state","eventcards","marginTop","onChangeHandler","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Container from \"@material-ui/core/container\";\r\nimport EventCard from \"../comps/eventCard\";\r\nimport { Event } from \"../classes\";\r\n\r\n/** Parse .ics string into event array */\r\nfunction toEventArray(lines) {\r\n    return new Promise(resolve => {\r\n        var events = [];\r\n        var tempEvent = { cal: \"重要事項\" };\r\n        var reading = false;\r\n        for (var line = 0; line < lines.length; line++) {\r\n            if (lines[line].includes(\"BEGIN\") && lines[line].includes(\"VEVENT\")) {\r\n                reading = true;\r\n            } else if (lines[line].includes(\"END\") && lines[line].includes(\"VEVENT\")) {\r\n                if (\r\n                    tempEvent.title != undefined &&\r\n                    tempEvent.cal != undefined &&\r\n                    tempEvent.startTime != undefined &&\r\n                    tempEvent.endTime != undefined\r\n                ) {\r\n                    events.push(new Event(tempEvent.title, tempEvent.cal, tempEvent.startTime, tempEvent.endTime));\r\n                }\r\n                reading = false;\r\n            }\r\n            if (reading) {\r\n                if (lines[line].includes(\"DTSTART\")) {\r\n                    tempEvent.startTime = calenDate(lines[line].split(\":\")[1]);\r\n                } else if (lines[line].includes(\"DTEND\")) {\r\n                    tempEvent.endTime = calenDate(lines[line].split(\":\")[1]);\r\n                } else if (lines[line].split(\":\")[0] == \"SUMMARY\") {\r\n                    tempEvent.title = lines[line].split(\":\")[1];\r\n                }\r\n            }\r\n        }\r\n        resolve(events);\r\n    });\r\n}\r\n\r\n/** Parse string of ics date format into date object */\r\nfunction calenDate(icalStr) {\r\n    var strYear = icalStr.substr(0, 4);\r\n    var strMonth = parseInt(icalStr.substr(4, 2), 10) - 1;\r\n    var strDay = icalStr.substr(6, 2);\r\n    var strHour = icalStr.substr(9, 2);\r\n    var strMin = icalStr.substr(11, 2);\r\n    var strSec = icalStr.substr(13, 2);\r\n\r\n    var oDate = new Date(strYear, strMonth, strDay, strHour, strMin, strSec);\r\n\r\n    return oDate;\r\n}\r\n\r\nclass icstool extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            events: []\r\n        };\r\n    }\r\n\r\n    onChangeHandler = e => {\r\n        const file = e.target.files[0];\r\n        var reader = new FileReader();\r\n        const vm = this;\r\n        reader.onload = async function() {\r\n            var lines = this.result.split(\"\\n\");\r\n            vm.setState({\r\n                events: await toEventArray(lines).then(arr => {\r\n                    var a = \"\";\r\n                    arr.map(event => {\r\n                        a =\r\n                            a +\r\n                            \"new Event(\" +\r\n                            event.title +\r\n                            \",\" +\r\n                            event.cal +\r\n                            \", new Date(\" +\r\n                            event.startTime +\r\n                            \"), new Date(\" +\r\n                            event.endTime +\r\n                            \"),\";\r\n                    });\r\n                    console.log(a);\r\n                })\r\n            });\r\n        };\r\n        reader.readAsText(file);\r\n    };\r\n\r\n    render() {\r\n        const eventcards = this.state.events.map(event => {\r\n            return <EventCard event={event} height={90} key={event.title} />;\r\n        });\r\n        return (\r\n            <Container maxWidth=\"xs\">\r\n                <input\r\n                    style={{ marginTop: this.state.events.length == 0 ? 360 : 60 }}\r\n                    type=\"file\"\r\n                    name=\"file\"\r\n                    onChange={this.onChangeHandler}\r\n                />\r\n                {eventcards}\r\n                <style global jsx>{`\r\n                    body {\r\n                        background: #333333;\r\n                    }\r\n                    ::-webkit-scrollbar {\r\n                        width: 5px;\r\n                    }\r\n                    ::-webkit-scrollbar-track {\r\n                        -webkit-border-radius: 10px;\r\n                        border-radius: 10px;\r\n                        margin: 80px 0 5px 0;\r\n                    }\r\n                    ::-webkit-scrollbar-thumb {\r\n                        -webkit-border-radius: 4px;\r\n                        border-radius: 4px;\r\n                        background: rgb(80, 80, 80);\r\n                    }\r\n                `}</style>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default icstool;\r\n"]},"metadata":{},"sourceType":"module"}