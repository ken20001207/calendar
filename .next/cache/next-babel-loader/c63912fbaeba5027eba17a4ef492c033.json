{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\imyua\\\\dev\\\\calendar\\\\pages\\\\index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Container from \"@material-ui/core/container\";\nimport DayView from \"../comps/DayView\";\nimport fetch from \"isomorphic-unfetch\";\nimport { User, Calendar, Event } from \"../classes\";\n\nfunction startOfDay(date) {\n  if (!date instanceof Date) {\n    console.error(\"傳入的時間不是合法的 Date 物件。\");\n    return null;\n  }\n\n  date = new Date(date);\n  var time = new Date();\n  time.setTime(date.getTime());\n  time.setHours(0, 0, 0);\n  return time;\n}\n\nfunction endOfDay(date) {\n  if (!date instanceof Date) {\n    console.error(\"傳入的時間不是合法的 Date 物件。\");\n    return null;\n  }\n\n  date = new Date(date);\n  var time = new Date();\n  time.setTime(date.getTime());\n  time.setHours(23, 59, 59);\n  return time;\n}\n\nfunction fillEvents(events) {\n  var filled = new Array();\n  var time = startOfDay(events[0].startTime);\n  events.map(event => {\n    var startTime = new Date(event.startTime);\n    var endTime = new Date(event.endTime);\n    filled.push(new Event({\n      startTime: time,\n      endTime: startTime\n    }, true));\n    filled.push(event);\n    time.setTime(endTime.getTime());\n  });\n  filled.push(new Event({\n    startTime: time,\n    endTime: endOfDay(events[0].startTime)\n  }, true));\n  return filled;\n}\n\nclass index extends React.Component {\n  static async getInitialProps() {\n    const res = await fetch(\"http://localhost:3000/api/getuserdata\");\n    const json = await res.json();\n    var userdata = new User(json);\n    var filled = fillEvents(userdata.calendars[0].events);\n    return {\n      userdata: userdata,\n      filled: filled\n    };\n  }\n\n  render() {\n    const timeline = {\n      overflowY: \"scroll\",\n      maxHeight: \"90vh\",\n      padding: 24\n    };\n    return __jsx(Container, {\n      maxWidth: \"md\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      style: timeline,\n      className: \"jsx-2817667622\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, __jsx(DayView, {\n      events: this.props.filled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    })), __jsx(_JSXStyle, {\n      id: \"2817667622\",\n      __self: this\n    }, \"body{background:#333333;}::-webkit-scrollbar{width:5px;}::-webkit-scrollbar-track{-webkit-border-radius:10px;border-radius:10px;margin:80px 0 5px 0;}::-webkit-scrollbar-thumb{-webkit-border-radius:4px;border-radius:4px;background:rgb(80,80,80);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcaW15dWFcXGRldlxcY2FsZW5kYXJcXHBhZ2VzXFxpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrRW1DLEFBRzRDLEFBR1QsQUFHaUIsQUFLRCxVQVA5QixTQUhBLE9BV3NCLENBTEMsaUJBTVEsRUFMUCxvQkFDeEIsR0FLQSIsImZpbGUiOiJDOlxcVXNlcnNcXGlteXVhXFxkZXZcXGNhbGVuZGFyXFxwYWdlc1xcaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBDb250YWluZXIgZnJvbSBcIkBtYXRlcmlhbC11aS9jb3JlL2NvbnRhaW5lclwiO1xyXG5pbXBvcnQgRGF5VmlldyBmcm9tIFwiLi4vY29tcHMvRGF5Vmlld1wiO1xyXG5pbXBvcnQgZmV0Y2ggZnJvbSBcImlzb21vcnBoaWMtdW5mZXRjaFwiO1xyXG5pbXBvcnQgeyBVc2VyLCBDYWxlbmRhciwgRXZlbnQgfSBmcm9tIFwiLi4vY2xhc3Nlc1wiO1xyXG5cclxuZnVuY3Rpb24gc3RhcnRPZkRheShkYXRlKSB7XHJcbiAgICBpZiAoIWRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIuWCs+WFpeeahOaZgumWk+S4jeaYr+WQiOazleeahCBEYXRlIOeJqeS7tuOAglwiKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgIHZhciB0aW1lID0gbmV3IERhdGUoKTtcclxuICAgIHRpbWUuc2V0VGltZShkYXRlLmdldFRpbWUoKSk7XHJcbiAgICB0aW1lLnNldEhvdXJzKDAsIDAsIDApO1xyXG4gICAgcmV0dXJuIHRpbWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuZE9mRGF5KGRhdGUpIHtcclxuICAgIGlmICghZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwi5YKz5YWl55qE5pmC6ZaT5LiN5piv5ZCI5rOV55qEIERhdGUg54mp5Lu244CCXCIpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgdmFyIHRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdGltZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpKTtcclxuICAgIHRpbWUuc2V0SG91cnMoMjMsIDU5LCA1OSk7XHJcbiAgICByZXR1cm4gdGltZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmlsbEV2ZW50cyhldmVudHMpIHtcclxuICAgIHZhciBmaWxsZWQgPSBuZXcgQXJyYXkoKTtcclxuICAgIHZhciB0aW1lID0gc3RhcnRPZkRheShldmVudHNbMF0uc3RhcnRUaW1lKTtcclxuICAgIGV2ZW50cy5tYXAoZXZlbnQgPT4ge1xyXG4gICAgICAgIHZhciBzdGFydFRpbWUgPSBuZXcgRGF0ZShldmVudC5zdGFydFRpbWUpO1xyXG4gICAgICAgIHZhciBlbmRUaW1lID0gbmV3IERhdGUoZXZlbnQuZW5kVGltZSk7XHJcbiAgICAgICAgZmlsbGVkLnB1c2gobmV3IEV2ZW50KHsgc3RhcnRUaW1lOiB0aW1lLCBlbmRUaW1lOiBzdGFydFRpbWUgfSwgdHJ1ZSkpO1xyXG4gICAgICAgIGZpbGxlZC5wdXNoKGV2ZW50KTtcclxuICAgICAgICB0aW1lLnNldFRpbWUoZW5kVGltZS5nZXRUaW1lKCkpO1xyXG4gICAgfSk7XHJcbiAgICBmaWxsZWQucHVzaChuZXcgRXZlbnQoeyBzdGFydFRpbWU6IHRpbWUsIGVuZFRpbWU6IGVuZE9mRGF5KGV2ZW50c1swXS5zdGFydFRpbWUpIH0sIHRydWUpKTtcclxuICAgIHJldHVybiBmaWxsZWQ7XHJcbn1cclxuXHJcbmNsYXNzIGluZGV4IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIHN0YXRpYyBhc3luYyBnZXRJbml0aWFsUHJvcHMoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2dldHVzZXJkYXRhXCIpO1xyXG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgICAgIHZhciB1c2VyZGF0YSA9IG5ldyBVc2VyKGpzb24pO1xyXG4gICAgICAgIHZhciBmaWxsZWQgPSBmaWxsRXZlbnRzKHVzZXJkYXRhLmNhbGVuZGFyc1swXS5ldmVudHMpO1xyXG4gICAgICAgIHJldHVybiB7IHVzZXJkYXRhOiB1c2VyZGF0YSwgZmlsbGVkOiBmaWxsZWQgfTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3QgdGltZWxpbmUgPSB7XHJcbiAgICAgICAgICAgIG92ZXJmbG93WTogXCJzY3JvbGxcIixcclxuICAgICAgICAgICAgbWF4SGVpZ2h0OiBcIjkwdmhcIixcclxuICAgICAgICAgICAgcGFkZGluZzogMjRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8Q29udGFpbmVyIG1heFdpZHRoPVwibWRcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3RpbWVsaW5lfT5cclxuICAgICAgICAgICAgICAgICAgICA8RGF5VmlldyBldmVudHM9e3RoaXMucHJvcHMuZmlsbGVkfSAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgPHN0eWxlIGdsb2JhbCBqc3g+e2BcclxuICAgICAgICAgICAgICAgICAgICBib2R5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzMzMzMzMztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhciB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA1cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogODBweCAwIDVweCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiKDgwLCA4MCwgODApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICAgICAgPC9Db250YWluZXI+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgaW5kZXg7XHJcbiJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\imyua\\\\\\\\dev\\\\\\\\calendar\\\\\\\\pages\\\\\\\\index.js */\"));\n  }\n\n}\n\nexport default index;","map":{"version":3,"sources":["C:/Users/imyua/dev/calendar/pages/index.js"],"names":["React","Container","DayView","fetch","User","Calendar","Event","startOfDay","date","Date","console","error","time","setTime","getTime","setHours","endOfDay","fillEvents","events","filled","Array","startTime","map","event","endTime","push","index","Component","getInitialProps","res","json","userdata","calendars","render","timeline","overflowY","maxHeight","padding","props"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Container from \"@material-ui/core/container\";\r\nimport DayView from \"../comps/DayView\";\r\nimport fetch from \"isomorphic-unfetch\";\r\nimport { User, Calendar, Event } from \"../classes\";\r\n\r\nfunction startOfDay(date) {\r\n    if (!date instanceof Date) {\r\n        console.error(\"傳入的時間不是合法的 Date 物件。\");\r\n        return null;\r\n    }\r\n    date = new Date(date);\r\n    var time = new Date();\r\n    time.setTime(date.getTime());\r\n    time.setHours(0, 0, 0);\r\n    return time;\r\n}\r\n\r\nfunction endOfDay(date) {\r\n    if (!date instanceof Date) {\r\n        console.error(\"傳入的時間不是合法的 Date 物件。\");\r\n        return null;\r\n    }\r\n    date = new Date(date);\r\n    var time = new Date();\r\n    time.setTime(date.getTime());\r\n    time.setHours(23, 59, 59);\r\n    return time;\r\n}\r\n\r\nfunction fillEvents(events) {\r\n    var filled = new Array();\r\n    var time = startOfDay(events[0].startTime);\r\n    events.map(event => {\r\n        var startTime = new Date(event.startTime);\r\n        var endTime = new Date(event.endTime);\r\n        filled.push(new Event({ startTime: time, endTime: startTime }, true));\r\n        filled.push(event);\r\n        time.setTime(endTime.getTime());\r\n    });\r\n    filled.push(new Event({ startTime: time, endTime: endOfDay(events[0].startTime) }, true));\r\n    return filled;\r\n}\r\n\r\nclass index extends React.Component {\r\n    static async getInitialProps() {\r\n        const res = await fetch(\"http://localhost:3000/api/getuserdata\");\r\n        const json = await res.json();\r\n        var userdata = new User(json);\r\n        var filled = fillEvents(userdata.calendars[0].events);\r\n        return { userdata: userdata, filled: filled };\r\n    }\r\n\r\n    render() {\r\n        const timeline = {\r\n            overflowY: \"scroll\",\r\n            maxHeight: \"90vh\",\r\n            padding: 24\r\n        };\r\n\r\n        return (\r\n            <Container maxWidth=\"md\">\r\n                <div style={timeline}>\r\n                    <DayView events={this.props.filled} />\r\n                </div>\r\n\r\n                <style global jsx>{`\r\n                    body {\r\n                        background: #333333;\r\n                    }\r\n                    ::-webkit-scrollbar {\r\n                        width: 5px;\r\n                    }\r\n                    ::-webkit-scrollbar-track {\r\n                        -webkit-border-radius: 10px;\r\n                        border-radius: 10px;\r\n                        margin: 80px 0 5px 0;\r\n                    }\r\n                    ::-webkit-scrollbar-thumb {\r\n                        -webkit-border-radius: 4px;\r\n                        border-radius: 4px;\r\n                        background: rgb(80, 80, 80);\r\n                    }\r\n                `}</style>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default index;\r\n"]},"metadata":{},"sourceType":"module"}