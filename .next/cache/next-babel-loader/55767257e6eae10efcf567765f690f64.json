{"ast":null,"code":"import { MongoClient } from \"mongodb\";\nimport nextConnect from \"next-connect\";\nconst client = new MongoClient(\"mongodb+srv://yuanlin:411612@cluster0-9wzb6.gcp.mongodb.net/test?retryWrites=true&w=majority\", {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\n\nasync function database(req, res, next) {\n  if (!client.isConnected()) await client.connect();\n  req.dbClient = client;\n  req.db = client.db(\"calendar\");\n  return next();\n}\n\nconst middleware = nextConnect();\nmiddleware.use(database);\nexport default middleware;","map":null,"metadata":{},"sourceType":"module"}