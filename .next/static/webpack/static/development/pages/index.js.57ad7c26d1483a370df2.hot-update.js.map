{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.57ad7c26d1483a370df2.hot-update.js","sources":["webpack:///./comps/eventCard.js"],"sourcesContent":["import React from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { Event } from \"../classes\";\r\n\r\nclass EventCard extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            elevation: 0\r\n        };\r\n        this.handleMouseOver = this.handleMouseOver.bind(this);\r\n        this.handleMouseLeave = this.handleMouseLeave.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleEmptyCardClick = this.handleEmptyCardClick.bind(this);\r\n    }\r\n\r\n    handleMouseOver() {\r\n        this.setState({\r\n            elevation: 20\r\n        });\r\n    }\r\n\r\n    handleMouseLeave() {\r\n        this.setState({\r\n            elevation: 0\r\n        });\r\n    }\r\n\r\n    handleClick() {\r\n        this.props.openEventEditDialog(this.props.event);\r\n    }\r\n\r\n    handleEmptyCardClick() {\r\n        this.props.openEventCreateDialog(this.props.event);\r\n    }\r\n\r\n    emptyCard(startTime, endTime) {\r\n        endTime = endTime;\r\n        startTime = startTime;\r\n        const duration = (endTime - startTime) / 60000;\r\n        var cardStyle = {\r\n            height: duration,\r\n            backgroundColor: \"transparent\",\r\n            borderBottomStyle: endTime.getMinutes() == 0 ? \"solid\" : \"none\",\r\n            borderBottomColor: \"#444444\",\r\n            borderBottomWidth: 1,\r\n            borderTopStyle: startTime.getMinutes() == 0 ? \"solid\" : \"none\",\r\n            borderTopColor: \"#444444\",\r\n            borderTopWidth: 1\r\n        };\r\n        return (\r\n            <div style={cardStyle} key={startTime.getTime()} onClick={this.handleEmptyCardClick}>\r\n                {/** startTime.getHours() +\r\n                    \":\" +\r\n                    startTime.getMinutes() +\r\n                    \" - \" +\r\n                    endTime.getHours() +\r\n                    \":\" +\r\n                 endTime.getMinutes() */}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    EmptySections(start, end) {\r\n        if (end.getHours() < start.getHours()) {\r\n            end.setHours(23, 59, 59);\r\n        }\r\n        var arr = new Array(end.getHours() - start.getHours() + 1);\r\n        if (start.getHours() == end.getHours()) {\r\n            arr[0] = this.emptyCard(start, end);\r\n        } else if (start.getHours() + 1 == end.getHours()) {\r\n            var a = new Date(end);\r\n            a.setMinutes(0);\r\n            arr[0] = this.emptyCard(start, a);\r\n            arr[1] = this.emptyCard(a, end);\r\n        } else {\r\n            var a = new Date(start);\r\n            a.setHours(start.getHours() + 1, 0);\r\n            arr[0] = this.emptyCard(start, a);\r\n            for (var i = start.getHours() + 1, j = 1; i < end.getHours(); i++, j++) {\r\n                var a = new Date(start);\r\n                a.setHours(i, 0);\r\n                var b = new Date(start);\r\n                b.setHours(i + 1, 0);\r\n                arr[j] = this.emptyCard(a, b);\r\n            }\r\n            var a = new Date(end);\r\n            a.setMinutes(0);\r\n            arr[end.getHours() - start.getHours()] = emptyCard(a, end);\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    render() {\r\n        if (this.props.event instanceof Event) {\r\n            if (this.props.event.isEmpty) {\r\n                return this.EmptySections(this.props.event.startTime, this.props.event.endTime).map(emptyCard => {\r\n                    return emptyCard;\r\n                });\r\n            } else {\r\n                const style = {\r\n                    height: this.props.height != undefined ? this.props.height : this.props.event.duration,\r\n                    backgroundImage: \"linear-gradient(315deg, \" + this.props.event.color[0] + \" 0%, \" + this.props.event.color[1] + \" 100%)\",\r\n                    fontSize: 8,\r\n                    paddingLeft: 16,\r\n                    marginTop: this.props.height != undefined ? 15 : 0,\r\n                    paddingTop: 6,\r\n                    paddingBottom: 6\r\n                };\r\n\r\n                /** compose event info of card */\r\n                var lineAmount =\r\n                    this.props.height != undefined\r\n                        ? parseInt(this.props.height / 20) > 1\r\n                            ? parseInt(this.props.height / 20) - 1\r\n                            : 1\r\n                        : parseInt(this.props.event.duration / 20) > 1\r\n                        ? parseInt(this.props.event.duration / 20) - 1\r\n                        : 1;\r\n                var eventInfo = [];\r\n                eventInfo.push(\r\n                    this.props.event.isAllDayEvent() ? (\r\n                        <p key=\"title\" style={{ color: \"white\" }}>\r\n                            {this.props.event.title}{\" \"}\r\n                        </p>\r\n                    ) : (\r\n                        <p key=\"title\" style={{ color: \"white\" }}>\r\n                            {this.props.event.title}{\" \"}\r\n                            <strong style={{ marginLeft: 16, color: \"rgba(255,255,255,0.4)\" }}>{this.props.event.getDurationString()}</strong>\r\n                        </p>\r\n                    )\r\n                );\r\n                if (!this.props.event.isAllDayEvent())\r\n                    eventInfo.push(\r\n                        <p style={{ color: \"rgba(255,255,255,0.8)\" }} key=\"duration\">\r\n                            {this.props.event.duration} 分鐘\r\n                        </p>\r\n                    );\r\n                else {\r\n                    eventInfo.push(\r\n                        <p style={{ color: \"rgba(255,255,255,0.8)\" }} key=\"duration\">\r\n                            全天事件\r\n                        </p>\r\n                    );\r\n                }\r\n                eventInfo.push(\r\n                    <p style={{ color: \"rgba(255,255,255,0.8)\" }} key=\"cal\">\r\n                        Event ID : {this.props.event.id}\r\n                    </p>\r\n                );\r\n                return (\r\n                    <Paper\r\n                        style={style}\r\n                        elevation={this.state.elevation}\r\n                        onMouseEnter={this.handleMouseOver}\r\n                        onMouseLeave={this.handleMouseLeave}\r\n                        onClick={this.handleClick}\r\n                        key={this.props.event.id}\r\n                    >\r\n                        {eventInfo.slice(0, lineAmount).map(info => {\r\n                            return info;\r\n                        })}\r\n                    </Paper>\r\n                );\r\n            }\r\n        } else {\r\n            console.error(\"渲染事件卡片時接收到了不符合規範的 Event 物件。\");\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default EventCard;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AARA;AASA;AACA;;;AACA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAUA;AACA;AAAA;AAQA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;;;;AArKA;AACA;AAuKA;;;;A","sourceRoot":""}